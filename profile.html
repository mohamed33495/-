<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4f46e5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>Ø­Ø³Ø§Ø¨ÙŠ | Ø´Ø­Ù†ØªÙŠ</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }

        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 h-screen flex flex-col overflow-hidden selection:bg-indigo-200">

    <div class="fixed top-0 left-0 w-full h-48 bg-indigo-600 rounded-b-[2.5rem] z-0 shadow-lg"></div>

    <div class="relative z-10 flex-1 overflow-y-auto pb-28 no-scrollbar">

        <header class="px-6 pt-10 pb-4 flex justify-between items-center text-white">
            <div>
                <h1 class="text-2xl font-bold">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ ğŸ‘¤</h1>
                <p class="text-indigo-200 text-xs mt-1">Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ¹Ù†Ø§ÙˆÙŠÙ†Ùƒ</p>
            </div>
            <button onclick="window.location.href='login.html?logout=true'"
                class="bg-white/20 p-2.5 rounded-xl backdrop-blur-md hover:bg-white/30 transition text-sm font-bold">
                <i class="fa-solid fa-right-from-bracket ml-1"></i> Ø®Ø±ÙˆØ¬
            </button>
        </header>

        <main class="px-4 space-y-6">

            <div class="relative -mt-2 flex justify-center mb-4">
                <div class="relative group">
                    <div class="w-28 h-28 rounded-full p-1 bg-white shadow-xl">
                        <img src="https://ui-avatars.com/api/?name=Mohamed+Ali&background=e0e7ff&color=4f46e5&size=256"
                            class="w-full h-full rounded-full object-cover">
                    </div>
                    <button
                        class="absolute bottom-1 right-1 bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center shadow-lg border-2 border-white active:scale-90 transition">
                        <i class="fa-solid fa-camera text-xs"></i>
                    </button>
                </div>
            </div>

            <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-gray-800">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
                    <button class="text-indigo-600 text-xs font-bold hover:underline">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-400 mb-1">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
                        <input type="text" id="profile-name" value="Mohamed Ali" disabled
                            class="w-full px-4 py-3 rounded-xl bg-gray-50 border-none focus:ring-2 focus:ring-indigo-500 text-sm font-bold text-gray-700">
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-bold text-gray-400 mb-1">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                            <input type="tel" id="profile-phone" value="091 123 4567" disabled
                                class="w-full px-4 py-3 rounded-xl bg-gray-50 border-none focus:ring-2 focus:ring-indigo-500 text-sm font-bold text-gray-700 text-left"
                                dir="ltr">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-400 mb-1">Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ</label>
                            <div id="profile-suite-id"
                                class="w-full px-4 py-3 rounded-xl bg-indigo-50 border border-indigo-100 text-indigo-600 text-sm font-bold text-center select-all">
                                LY-10234
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-gray-400 mb-1">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="profile-email" value="mohamed@example.com" disabled
                            class="w-full px-4 py-3 rounded-xl bg-gray-50 border-none focus:ring-2 focus:ring-indigo-500 text-sm font-bold text-gray-700">
                    </div>
                </div>
            </div>

            <a href="addresses.html"
                class="block bg-indigo-600 text-white p-5 rounded-3xl shadow-lg shadow-indigo-200 active:scale-[0.98] transition group relative overflow-hidden">
                <div class="absolute right-0 top-0 w-24 h-24 bg-white opacity-10 rounded-full blur-xl -mr-5 -mt-5">
                </div>
                <div class="flex items-center justify-between relative z-10">
                    <div class="flex items-center gap-4">
                        <div
                            class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
                            <i class="fa-solid fa-map-location-dot text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">Ø¹Ù†Ø§ÙˆÙŠÙ†ÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©</h3>
                            <p class="text-indigo-200 text-xs">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† (Ø§Ù„ØµÙŠÙ†ØŒ Ø£Ù…Ø±ÙŠÙƒØ§ØŒ ØªØ±ÙƒÙŠØ§)</p>
                        </div>
                    </div>
                    <i
                        class="fa-solid fa-chevron-left bg-white/20 w-8 h-8 flex items-center justify-center rounded-full text-sm"></i>
                </div>
            </a>

            <div class="bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="divide-y divide-gray-50">

                    <button class="w-full p-4 flex items-center justify-between hover:bg-gray-50 transition">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-8 h-8 rounded-lg bg-orange-50 text-orange-500 flex items-center justify-center">
                                <i class="fa-solid fa-lock"></i>
                            </div>
                            <span class="text-sm font-bold text-gray-700">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</span>
                        </div>
                        <i class="fa-solid fa-chevron-left text-gray-300 text-xs"></i>
                    </button>

                    <button class="w-full p-4 flex items-center justify-between hover:bg-gray-50 transition">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg bg-blue-50 text-blue-500 flex items-center justify-center"><i
                                    class="fa-solid fa-globe"></i></div>
                            <span class="text-sm font-bold text-gray-700">Ù„ØºØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</span>
                        </div>
                        <span class="text-xs text-gray-400 font-bold flex items-center gap-2">
                            Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© <i class="fa-solid fa-chevron-left text-gray-300"></i>
                        </span>
                    </button>

                    <button class="w-full p-4 flex items-center justify-between hover:bg-gray-50 transition">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-8 h-8 rounded-lg bg-purple-50 text-purple-500 flex items-center justify-center">
                                <i class="fa-solid fa-circle-question"></i>
                            </div>
                            <span class="text-sm font-bold text-gray-700">Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</span>
                        </div>
                        <i class="fa-solid fa-chevron-left text-gray-300 text-xs"></i>
                    </button>

                </div>
            </div>

        </main>
    </div>

    <nav
        class="fixed bottom-6 left-4 right-4 bg-white/90 backdrop-blur-xl border border-white/20 shadow-[0_8px_30px_rgb(0,0,0,0.12)] rounded-2xl flex justify-around items-center py-3 z-50">

        <a href="dashboard.html"
            class="flex flex-col items-center gap-1 text-gray-400 hover:text-indigo-600 transition group">
            <i class="fa-solid fa-house text-xl group-active:scale-90 transition"></i>
        </a>

        <a href="shipments.html"
            class="flex flex-col items-center gap-1 text-gray-400 hover:text-indigo-600 transition group">
            <i class="fa-solid fa-box-open text-xl group-active:scale-90 transition"></i>
        </a>

        <div class="relative -top-8">
            <a href="create-shipment.html"
                class="bg-indigo-600 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-lg shadow-indigo-500/40 border-4 border-gray-50 transform active:scale-90 transition">
                <i class="fa-solid fa-plus text-2xl"></i>
            </a>
        </div>

        <a href="wallet.html"
            class="flex flex-col items-center gap-1 text-gray-400 hover:text-indigo-600 transition group">
            <i class="fa-solid fa-wallet text-xl group-active:scale-90 transition"></i>
        </a>

        <a href="support.html" class="flex flex-col items-center gap-1 text-indigo-600 transition group relative">
            <i class="fa-solid fa-user-gear text-xl"></i>
            <span class="absolute -bottom-1.5 w-1 h-1 bg-indigo-600 rounded-full"></span>
        </a>

    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const userId = localStorage.getItem('userId');
            if (!userId) {
                console.warn('No User ID found');
                return;
            }

            try {
                const response = await fetch(`http://localhost:3000/api/user-details?id=${userId}`);
                const data = await response.json();

                if (data.success) {
                    const u = data.user;
                    // Images
                    const avatarImgs = document.querySelectorAll('img[src*="ui-avatars.com"]');
                    avatarImgs.forEach(img => {
                        const safeName = u.full_name.replace(' ', '+');
                        img.src = `https://ui-avatars.com/api/?name=${safeName}&background=e0e7ff&color=4f46e5&size=256`;
                    });

                    // Inputs
                    const inputs = document.querySelectorAll('input');
                    // Simple heuristic: match by value or assume order. Better to querySelector specific ones but hardcoded structure makes it tricky.
                    // Let's use specific querying based on label context or index if IDs missing.
                    // Profile has: Name(0), Phone(1), Email(2). Code is div.

                    // Allow for "Name" input
                    if (inputs[0]) inputs[0].value = u.full_name;
                    // Phone
                    if (inputs[1]) inputs[1].value = u.phone_number || '';
                    // Email
                    if (inputs[2]) inputs[2].value = u.email;

                    // Suite ID (in div)
                    const codeDiv = document.querySelector('.bg-indigo-50.text-indigo-600');
                    if (codeDiv) codeDiv.textContent = u.suite_id || 'LY-????';
                }
            } catch (err) {
                console.error('Failed to fetch user details:', err);
            }
        });
    </script>
</body>

</html>